# 路由器/无线AP

[TOC]

## 路由器

> router 应该提供两个IP，一个用于LAN交互，一个用于连接Internet。且==路由器会隔离所有广播(即丢弃二层广播包，不进行arp和rarp)==

### 概述

- 路由器是一种典型的网络层设备。
- 路由器是互联网中的关键设备。

==主要作用==

- ==连通不同的网络。==
- 选择信息传送的线路。选择通畅快捷的近路，能大大提高通信速度，减轻网络系统通信负荷，节约网络系统资源，提高网络系统畅通率，从而让网络系统发挥出更大的效益来。

### 路由器的结构

- 路由器(router)是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组。也就是说，==将路由器某个输入端口收到的分组，按照分组要去的目的地（即目的网络），把该分组从路由器的某个合适的输出端口转发给下一跳路由器。==
- 下一跳路由器也按照这种方法处理分组，直到该分组到达终点为止。 
- 路由器的转发分组正是网络层的主要工作。

<img src="..\..\..\imgs\_Net\计算机网络\Snipaste_2020-08-25_01-06-47.png"/>

### 分组转发部分

- 交换结构 (switching fabric)：又称为交换组织，其作用是==根据转发表 (forwarding table) 对分组进行处理==。

- 一组输入端口

  > 输入端口中的查找和转发功能在路由器的交换功能中是最重要的。

- 一组输出端口
  （请注意：这里的端口就是硬件接口）

### 转发和路由

- 转发

  forwarding 就是路由器根据转发表将用户的 IP 数据报从合适的端口转发出去。

- 路由

  routing 则是按照分布式算法，根据从各相邻路由器得到的关于网络拓扑的变化情况，动态地改变所选择的路由。

### 路由器分组转发算法

> 路由表指出，到某个网络应当先到某个路由器（即下一跳路由器）

(1) 从数据报的首部提取目的主机的 IP 地址 D, 得出目的网络地址为 N。
(2) 若网络 N 与此路由器直接相连，则把数据报直接交付目的主机 D；否则是间接交付，执行 (3)。
(3) 若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给路由表中所指明的下一跳路由器；否则，执行 (4)。
(4) 若路由表中有到达网络 N 的路由，则把数据报传送给路由表指明的下一跳路由器；否则，执行 (5)。
(5) 若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；否则，执行 (6)。
(6)  报告转发分组出错。 

## 无线AP

Wireless Access Point(简称无线AP，无线接入点，WAP)，是电脑网络中一种连接无线网络至有线网络(以太网)的设备，又称无线基站。它通常做为一个单独设备，==并通过有线网络连接到路由器==，==也能与路由器集成在一起==(叫做无线路由器=路由器+AP，一般家用的路由器都带有AP功能)。

<img src="..\..\..\imgs\_Net\Snipaste_2020-10-08_10-10-52.png"/>

