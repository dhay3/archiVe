<!DOCTYPE html>
<html lang="en"><script type="text/javascript">try {
(function injectPageScriptAPI(scriptName, shouldOverrideWebSocket, shouldOverrideWebRTC, isInjected) { 

    'use strict';

    /**
     * If script have been injected into a frame via contentWindow then we can simply take the copy of messageChannel left for us by parent document
     * Otherwise creates new message channel that sends a message to the content-script to check if request should be allowed or not.
     */
    var messageChannel = isInjected ? window[scriptName] : (function () {

        // Save original postMessage and addEventListener functions to prevent webpage from tampering both.
        var postMessage = window.postMessage;
        var addEventListener = window.addEventListener;

        // Current request ID (incremented every time we send a new message)
        var currentRequestId = 0;
        var requestsMap = {};

        /**
         * Handles messages sent from the content script back to the page script.
         *
         * @param event Event with necessary data
         */
        var onMessageReceived = function (event) {

            if (!event.data || !event.data.direction || event.data.direction !== "to-page-script@abu") {
                return;
            }

            var requestData = requestsMap[event.data.requestId];
            if (requestData) {
                var wrapper = requestData.wrapper;
                requestData.onResponseReceived(wrapper, event.data.block);
                delete requestsMap[event.data.requestId];
            }
        };

        /**
         * @param url                The URL to which wrapped object is willing to connect
         * @param requestType        Request type ( WEBSOCKET or WEBRTC)
         * @param wrapper            WebSocket wrapper instance
         * @param onResponseReceived Called when response is received
         */
        var sendMessage = function (url, requestType, wrapper, onResponseReceived) {

            if (currentRequestId === 0) {
                // Subscribe to response when this method is called for the first time
                addEventListener.call(window, "message", onMessageReceived, false);
            }

            var requestId = ++currentRequestId;
            requestsMap[requestId] = {
                wrapper: wrapper,
                onResponseReceived: onResponseReceived
            };

            var message = {
                requestId: requestId,
                direction: 'from-page-script@abu',
                elementUrl: url,
                documentUrl: document.URL,
                requestType: requestType
            };

            // Send a message to the background page to check if the request should be blocked
            postMessage.call(window, message, "*");
        };

        return {
            sendMessage: sendMessage
        };

    })();

    /*
     * In some case Chrome won't run content scripts inside frames.
     * So we have to intercept access to contentWindow/contentDocument and manually inject wrapper script into this context
     *
     * Based on: https://github.com/adblockplus/adblockpluschrome/commit/1aabfb3346dc0821c52dd9e97f7d61b8c99cd707
     */
    var injectedToString = Function.prototype.toString.bind(injectPageScriptAPI);

    var injectedFramesAdd;
    var injectedFramesHas;
    if (window.WeakSet instanceof Function) {
        var injectedFrames = new WeakSet();
        injectedFramesAdd = WeakSet.prototype.add.bind(injectedFrames);
        injectedFramesHas = WeakSet.prototype.has.bind(injectedFrames);
    } else {
        var frames = [];
        injectedFramesAdd = function (el) {
            if (frames.indexOf(el) < 0) {
                frames.push(el);
            }
        };
        injectedFramesHas = function (el) {
            return frames.indexOf(el) >= 0;
        };
    }

    /**
     * Injects wrapper's script into passed window
     * @param contentWindow Frame's content window
     */
    function injectPageScriptAPIInWindow(contentWindow) {
        try {
            if (contentWindow && !injectedFramesHas(contentWindow)) {
                injectedFramesAdd(contentWindow);
                contentWindow[scriptName] = messageChannel; // Left message channel for the injected script
                var args = "'" + scriptName + "', " + shouldOverrideWebSocket + ", " + shouldOverrideWebRTC + ", true";
                contentWindow.eval("(" + injectedToString() + ")(" + args + ");");
                delete contentWindow[scriptName];
            }
        } catch (e) {
        }
    }

    /**
     * Overrides access to contentWindow/contentDocument for the passed HTML element's interface (iframe, frame, object)
     * If the content of one of these objects is requested we will inject our wrapper script.
     * @param iface HTML element's interface
     */
    function overrideContentAccess(iface) {

        var contentWindowDescriptor = Object.getOwnPropertyDescriptor(iface.prototype, "contentWindow");
        var contentDocumentDescriptor = Object.getOwnPropertyDescriptor(iface.prototype, "contentDocument");

        // Apparently in HTMLObjectElement.prototype.contentWindow does not exist
        // in older versions of Chrome such as 42.
        if (!contentWindowDescriptor) {
            return;
        }

        var getContentWindow = Function.prototype.call.bind(contentWindowDescriptor.get);
        var getContentDocument = Function.prototype.call.bind(contentDocumentDescriptor.get);

        contentWindowDescriptor.get = function () {
            var contentWindow = getContentWindow(this);
            injectPageScriptAPIInWindow(contentWindow);
            return contentWindow;
        };
        contentDocumentDescriptor.get = function () {
            injectPageScriptAPIInWindow(getContentWindow(this));
            return getContentDocument(this);
        };

        Object.defineProperty(iface.prototype, "contentWindow", contentWindowDescriptor);
        Object.defineProperty(iface.prototype, "contentDocument", contentDocumentDescriptor);
    }

    var interfaces = [HTMLFrameElement, HTMLIFrameElement, HTMLObjectElement];
    for (var i = 0; i < interfaces.length; i++) {
        overrideContentAccess(interfaces[i]);
    }

    /**
     * Defines properties in destination object
     * @param src Source object
     * @param dest Destination object
     * @param properties Properties to copy
     */
    var copyProperties = function (src, dest, properties) {
        for (var i = 0; i < properties.length; i++) {
            var prop = properties[i];
            var descriptor = Object.getOwnPropertyDescriptor(src, prop);
            // Passed property may be undefined
            if (descriptor) {
                Object.defineProperty(dest, prop, descriptor);
            }
        }
    };

    /**
     * Check request by sending message to content script
     * @param url URL to block
     * @param type Request type
     * @param callback Result callback
     */
    var checkRequest = function (url, type, callback) {
        messageChannel.sendMessage(url, type, this, function (wrapper, blockConnection) {
            callback(blockConnection);
        });
    };

    /**
     * The function overrides window.WebSocket with our wrapper, that will check url with filters through messaging with content-script.
     *
     * IMPORTANT NOTE:
     * This function is first loaded as a content script. The only purpose of it is to call
     * the "toString" method and use resulting string as a text content for injected script.
     */
    var overrideWebSocket = function () { 

        if (!(window.WebSocket instanceof Function)) {
            return;
        }

        /**
         * WebSocket wrapper implementation.
         * https://github.com/AdguardTeam/AdguardBrowserExtension/issues/349
         *
         * Based on:
         * https://github.com/adblockplus/adblockpluschrome/commit/457a336ee55a433217c3ffe5d363e5c6980f26f4
         */

        /**
         * As far as possible we must track everything we use that could be sabotaged by the website later in order to circumvent us.
         */
        var RealWebSocket = WebSocket;
        var closeWebSocket = Function.prototype.call.bind(RealWebSocket.prototype.close);

        function WrappedWebSocket(url, protocols) {
            // Throw correct exceptions if the constructor is used improperly.
            if (!(this instanceof WrappedWebSocket)) {
                return RealWebSocket();
            }
            if (arguments.length < 1) {
                return new RealWebSocket();
            }

            var websocket = new RealWebSocket(url, protocols);

            // This is the key point: checking if this WS should be blocked or not
            // Don't forget that the type of 'websocket.url' is String, but 'url 'parameter might have another type.
            checkRequest(websocket.url, 'WEBSOCKET', function (blocked) {
                if (blocked) {
                    closeWebSocket(websocket);
                }
            });

            return websocket;
        }

        // https://github.com/AdguardTeam/AdguardBrowserExtension/issues/488
        WrappedWebSocket.prototype = RealWebSocket.prototype;
        window.WebSocket = WrappedWebSocket.bind();

        copyProperties(RealWebSocket, WebSocket, ["CONNECTING", "OPEN", "CLOSING", "CLOSED", "name", "prototype"]);

        RealWebSocket.prototype.constructor = WebSocket;

    };

    /**
     * The function overrides window.RTCPeerConnection with our wrapper, that will check ice servers URLs with filters through messaging with content-script.
     *
     * IMPORTANT NOTE:
     * This function is first loaded as a content script. The only purpose of it is to call
     * the "toString" method and use resulting string as a text content for injected script.
     */
    var overrideWebRTC = function () { 


        if (!(window.RTCPeerConnection instanceof Function) &&
            !(window.webkitRTCPeerConnection instanceof Function)) {
            return;
        }

        /**
         * RTCPeerConnection wrapper implementation.
         * https://github.com/AdguardTeam/AdguardBrowserExtension/issues/588
         *
         * Based on:
         * https://github.com/adblockplus/adblockpluschrome/commit/af0585137be19011eace1cf68bf61eed2e6db974
         *
         * Chromium webRequest API doesn't allow the blocking of WebRTC connections
         * https://bugs.chromium.org/p/chromium/issues/detail?id=707683
         */

        var RealRTCPeerConnection = window.RTCPeerConnection || window.webkitRTCPeerConnection;
        var closeRTCPeerConnection = Function.prototype.call.bind(RealRTCPeerConnection.prototype.close);

        var RealArray = Array;
        var RealString = String;
        var createObject = Object.create;
        var defineProperty = Object.defineProperty;

        /**
         * Convert passed url to string
         * @param url URL
         * @returns {string}
         */
        function urlToString(url) {
            if (typeof url !== "undefined") {
                return RealString(url);
            }
        }

        /**
         * Creates new immutable array from original with some transform function
         * @param original
         * @param transform
         * @returns {*}
         */
        function safeCopyArray(original, transform) {

            if (original === null || typeof original !== "object") {
                return original;
            }

            var immutable = RealArray(original.length);
            for (var i = 0; i < immutable.length; i++) {
                defineProperty(immutable, i, {
                    configurable: false, enumerable: false, writable: false,
                    value: transform(original[i])
                });
            }
            defineProperty(immutable, "length", {
                configurable: false, enumerable: false, writable: false,
                value: immutable.length
            });
            return immutable;
        }

        /**
         * Protect configuration from mutations
         * @param configuration RTCPeerConnection configuration object
         * @returns {*}
         */
        function protectConfiguration(configuration) {

            if (configuration === null || typeof configuration !== "object") {
                return configuration;
            }

            var iceServers = safeCopyArray(
                configuration.iceServers,
                function (iceServer) {

                    var url = iceServer.url;
                    var urls = iceServer.urls;

                    // RTCPeerConnection doesn't iterate through pseudo Arrays of urls.
                    if (typeof urls !== "undefined" && !(urls instanceof RealArray)) {
                        urls = [urls];
                    }

                    return createObject(iceServer, {
                        url: {
                            configurable: false, enumerable: false, writable: false,
                            value: urlToString(url)
                        },
                        urls: {
                            configurable: false, enumerable: false, writable: false,
                            value: safeCopyArray(urls, urlToString)
                        }
                    });
                }
            );

            return createObject(configuration, {
                iceServers: {
                    configurable: false, enumerable: false, writable: false,
                    value: iceServers
                }
            });
        }

        /**
         * Check WebRTC connection's URL and close if it's blocked by rule
         * @param connection Connection
         * @param url URL to check
         */
        function checkWebRTCRequest(connection, url) {
            checkRequest(url, 'WEBRTC', function (blocked) {
                if (blocked) {
                    try {
                        closeRTCPeerConnection(connection);
                    } catch (e) {
                        // Ignore exceptions
                    }
                }
            });
        }

        /**
         * Check each URL of ice server in configuration for blocking.
         *
         * @param connection RTCPeerConnection
         * @param configuration Configuration for RTCPeerConnection
         * https://developer.mozilla.org/en-US/docs/Web/API/RTCConfiguration
         */
        function checkConfiguration(connection, configuration) {

            if (!configuration || !configuration.iceServers) {
                return;
            }

            var iceServers = configuration.iceServers;
            for (var i = 0; i < iceServers.length; i++) {

                var iceServer = iceServers[i];
                if (!iceServer) {
                    continue;
                }

                if (iceServer.url) {
                    checkWebRTCRequest(connection, iceServer.url);
                }

                if (iceServer.urls) {
                    for (var j = 0; j < iceServer.urls.length; j++) {
                        checkWebRTCRequest(connection, iceServer.urls[j]);
                    }
                }
            }
        }

        /**
         * Overrides setConfiguration method
         * https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/setConfiguration
         */
        if (RealRTCPeerConnection.prototype.setConfiguration) {

            var realSetConfiguration = Function.prototype.call.bind(RealRTCPeerConnection.prototype.setConfiguration);

            RealRTCPeerConnection.prototype.setConfiguration = function (configuration) {
                configuration = protectConfiguration(configuration);
                // Call the real method first, so that validates the configuration
                realSetConfiguration(this, configuration);
                checkConfiguration(this, configuration);
            };
        }

        function WrappedRTCPeerConnection(configuration, arg) {

            if (!(this instanceof WrappedRTCPeerConnection)) {
                return RealRTCPeerConnection();
            }

            configuration = protectConfiguration(configuration);

            /**
             * The old webkitRTCPeerConnection constructor takes an optional second argument and we must pass it.
             */
            var connection = new RealRTCPeerConnection(configuration, arg);
            checkConfiguration(connection, configuration);
            return connection;
        }

        WrappedRTCPeerConnection.prototype = RealRTCPeerConnection.prototype;

        var boundWrappedRTCPeerConnection = WrappedRTCPeerConnection.bind();
        copyProperties(RealRTCPeerConnection, boundWrappedRTCPeerConnection, ["caller", "generateCertificate", "name", "prototype"]);
        RealRTCPeerConnection.prototype.constructor = boundWrappedRTCPeerConnection;

        if ("RTCPeerConnection" in window) {
            window.RTCPeerConnection = boundWrappedRTCPeerConnection;
        }
        if ("webkitRTCPeerConnection" in window) {
            window.webkitRTCPeerConnection = boundWrappedRTCPeerConnection;
        }
    };

    if (shouldOverrideWebSocket) {
        overrideWebSocket();
    }

    if (shouldOverrideWebRTC) {
        overrideWebRTC();
    }
})('wrapper-script-2634666530380073', false, true);
} catch (ex) { console.error('Error executing AG js: ' + ex); }
(function () {
            var current = document.currentScript;
            var parent = current && current.parentNode;
            if (parent) {
                parent.removeChild(current);
            }
        })();</script><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Vim help pages, always up-to-date">
<title>Vim: usr_28.txt</title>
<link rel="shortcut icon" href="https://vimhelp.org/favicon.ico">
<!-- favicon is based on http://amnoid.de/tmp/vim_solidbright_512.png and is used with permission by its author -->
<link rel="stylesheet" href="Vim%20usr_28.txt_Folding_files/vimhelp.css" type="text/css">

<link rel="stylesheet" class="select2-css" href="Vim%20usr_28.txt_Folding_files/select2.min.css" integrity="sha256-zaSoHBhwFdle0scfGEFUCwggPN7F+ip9XRglo8IWb4w=" crossorigin="anonymous">
<script defer="defer" src="Vim%20usr_28.txt_Folding_files/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script defer="defer" src="Vim%20usr_28.txt_Folding_files/select2.min.js" integrity="sha256-9yRP/2EFlblE92vzCA10469Ctd0jT48HnmmMw5rJZrA=" crossorigin="anonymous"></script>
<script defer="defer" src="Vim%20usr_28.txt_Folding_files/vimhelp.js"></script>
</head><body>
<div class="bar">
  <div class="ql">
Quick links:
<a href="https://vimhelp.org/">help overview</a> 路
<a href="https://vimhelp.org/quickref.txt.html">quick reference</a> 路
<a href="https://vimhelp.org/usr_toc.txt.html">user manual toc</a> 路
<a href="https://vimhelp.org/#reference_toc">reference manual toc</a>
路 <a href="https://vimhelp.org/vim_faq.txt.html">faq</a></div>
  <div class="srch">
    <select id="vh-select-tag" data-select2-id="select2-data-vh-select-tag" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true" style="display: inline-block;"></select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-1-tqx8" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-vh-select-tag-container" aria-controls="select2-vh-select-tag-container"><span class="select2-selection__rendered" id="select2-vh-select-tag-container" role="textbox" aria-readonly="true" title="Go to keyword"><span class="select2-selection__placeholder">Go to keyword</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
  </div>
  <form class="srch" action="https://duckduckgo.com" method="get" target="_blank" rel="noopener noreferrer">
    <input type="hidden" name="sites" value="vimhelp.org">
    <input type="search" name="q" id="vh-srch-input" placeholder="Site search">
  </form>
</div>

<main>
<div id="vh-content">
<pre><span id="usr_28.txt" class="t">usr_28.txt</span>    For <span class="i">Vim version 9.0.</span>  Last change: 2008 Jun 14

                     VIM USER MANUAL <a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> by <a href="https://vimhelp.org/intro.txt.html#Bram" class="d">Bram</a> <a href="https://vimhelp.org/intro.txt.html#Moolenaar" class="d">Moolenaar</a>

                                   <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a>


Structured text can be separated in sections.  And sections in sub-sections.
<a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> allows you to display <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/motion.txt.html#section" class="d">section</a> <a href="https://vimhelp.org/motion.txt.html#as" class="d">as</a> one line, providing an overview.
This chapter explains the different ways this can be done.

<a href="#28.1" class="l">28.1</a>  What <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> folding?
<a href="#28.2" class="l">28.2</a>  Manual <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a>
<a href="#28.3" class="l">28.3</a>  Working with <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a>
<a href="#28.4" class="l">28.4</a>  Saving and restoring <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a>
<a href="#28.5" class="l">28.5</a>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> by indent
<a href="#28.6" class="l">28.6</a>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> with markers
<a href="#28.7" class="l">28.7</a>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> by <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a>
<a href="#28.8" class="l">28.8</a>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> by <a href="https://vimhelp.org/eval.txt.html#expression" class="d">expression</a>
<a href="#28.9" class="l">28.9</a>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> unchanged lines
<a href="#28.10" class="l">28.10</a> Which fold <a href="https://vimhelp.org/eval.txt.html#method" class="d">method</a> to use?

     Next chapter: <a href="https://vimhelp.org/usr_29.txt.html#usr_29.txt" class="l">usr_29.txt</a>  Moving through programs
 Previous chapter: <a href="https://vimhelp.org/usr_27.txt.html#usr_27.txt" class="l">usr_27.txt</a>  Search commands and patterns
Table of contents: <a href="https://vimhelp.org/usr_toc.txt.html#usr_toc.txt" class="l">usr_toc.txt</a>

<span class="h">==============================================================================</span>
<span id="28.1" class="t">28.1</span>  What <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> folding?

<a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> used to show <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> range of lines in the buffer <a href="https://vimhelp.org/motion.txt.html#as" class="d">as</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> single line on the
screen.  Like <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> piece of paper which <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> folded to make <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> shorter:

        +------------------------+
        | line 1                 |
        | line 2                 |
        | line 3                 |
        |_______________________ |
        \                        \
         \________________________\
         <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a> folded lines           <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>
        /________________________/
        | line 12                |
        | line 13                |
        | line 14                |
        +------------------------+

The text <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> still in the buffer, unchanged.  Only the way lines are displayed
<a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> affected by folding.

The advantage of <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> that you can get <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> better overview of the
structure of text, by <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> lines of <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/motion.txt.html#section" class="d">section</a> and <a href="https://vimhelp.org/change.txt.html#replacing" class="d">replacing</a> <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> with <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> line
that indicates that there <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> section.

<span class="h">==============================================================================</span>
<span id="28.2" class="t">28.2</span>  Manual <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a>

Try <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> out: Position the cursor in <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/motion.txt.html#paragraph" class="d">paragraph</a> and type: 
<span class="e"></span>
<span class="e">        zfap</span>
<span class="e"></span>
You will see that the <a href="https://vimhelp.org/motion.txt.html#paragraph" class="d">paragraph</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> replaced by <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> highlighted line.  You have
created <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold.  <a href="https://vimhelp.org/fold.txt.html#zf" class="l">zf</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> an <a href="https://vimhelp.org/motion.txt.html#operator" class="d">operator</a> and <a href="https://vimhelp.org/motion.txt.html#ap" class="l">ap</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> text object selection.  You
can use the <a href="https://vimhelp.org/fold.txt.html#zf" class="l">zf</a> <a href="https://vimhelp.org/motion.txt.html#operator" class="d">operator</a> with any <a href="https://vimhelp.org/intro.txt.html#movement" class="d">movement</a> command to create <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold for the
text that <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> moved over.  <a href="https://vimhelp.org/fold.txt.html#zf" class="l">zf</a> also works in <a href="https://vimhelp.org/visual.txt.html#Visual" class="d">Visual</a> mode.

To <a href="https://vimhelp.org/starting.txt.html#view" class="d">view</a> the text again, open the fold by typing: 
<span class="e"></span>
<span class="e">        zo</span>
<span class="e"></span>
And you can close the fold again with: 
<span class="e"></span>
<span class="e">        zc</span>
<span class="e"></span>
All the <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> commands start with "<a href="https://vimhelp.org/index.txt.html#z" class="d">z</a>"<a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>  With some fantasy, this looks like <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a>
folded piece of paper, seen from the side.  The <a href="https://vimhelp.org/print.txt.html#letter" class="d">letter</a> after the "<a href="https://vimhelp.org/index.txt.html#z" class="d">z</a>" has <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a>
mnemonic meaning to make <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> easier to remember the commands:

        <a href="https://vimhelp.org/fold.txt.html#zf" class="d">zf</a>      F-old creation
        <a href="https://vimhelp.org/fold.txt.html#zo" class="d">zo</a>      O-pen <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold
        <a href="https://vimhelp.org/fold.txt.html#zc" class="d">zc</a>      C-lose <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold

Folds can be nested: <a href="https://vimhelp.org/insert.txt.html#A" class="d">A</a> region of text that contains <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> can be folded
again.  For example, you can fold each <a href="https://vimhelp.org/motion.txt.html#paragraph" class="d">paragraph</a> in this section, and then
fold all the sections in this chapter.  Try <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> out.  You will notice that
opening the fold for the whole chapter will restore the nested <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> <a href="https://vimhelp.org/motion.txt.html#as" class="d">as</a> they
were, some may be open and some may be closed.

Suppose you have created several folds, and now want to <a href="https://vimhelp.org/starting.txt.html#view" class="d">view</a> all the text.
You could <a href="https://vimhelp.org/motion.txt.html#go" class="d">go</a> to each fold and type "<a href="https://vimhelp.org/fold.txt.html#zo" class="d">zo</a>"<a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>  To <a href="https://vimhelp.org/diff.txt.html#do" class="d">do</a> this faster, use this command: 
<span class="e"></span>
<span class="e">        zr</span>
<span class="e"></span>
This will R-educe the folding.  The opposite is: 
<span class="e"></span>
<span class="e">        zm</span>
<span class="e"></span>
This <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> M-ore.  You can repeat "<a href="https://vimhelp.org/fold.txt.html#zr" class="d">zr</a>" and "<a href="https://vimhelp.org/fold.txt.html#zm" class="d">zm</a>" to open and close nested <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a>
of several levels.

If you have nested several levels deep, you can open all of them with: 
<span class="e"></span>
<span class="e">        zR</span>
<span class="e"></span>
This R-educes <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> until there are none left.  And you can close all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a>
with: 
<span class="e"></span>
<span class="e">        zM</span>
<span class="e"></span>
This <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> M-ore and M-ore.

You can quickly disable the <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> with the <a href="https://vimhelp.org/fold.txt.html#zn" class="l">zn</a> command.  Then <a href="https://vimhelp.org/fold.txt.html#zN" class="l">zN</a> brings
back the <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> <a href="https://vimhelp.org/motion.txt.html#as" class="d">as</a> <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> was.  <a href="https://vimhelp.org/fold.txt.html#zi" class="l">zi</a> toggles between the two.  This <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> useful
way of working:
<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> create <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> to get overview on your file
<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> move around to where you want to <a href="https://vimhelp.org/diff.txt.html#do" class="d">do</a> your work
<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> <a href="https://vimhelp.org/diff.txt.html#do" class="d">do</a> <a href="https://vimhelp.org/fold.txt.html#zi" class="l">zi</a> to look <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> the text and edit <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a>
<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> <a href="https://vimhelp.org/diff.txt.html#do" class="d">do</a> <a href="https://vimhelp.org/fold.txt.html#zi" class="l">zi</a> again to <a href="https://vimhelp.org/motion.txt.html#go" class="d">go</a> back to moving around

More about manual <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> in the <a href="https://vimhelp.org/intro.txt.html#reference" class="d">reference</a> manual: <a href="https://vimhelp.org/fold.txt.html#fold-manual" class="l">fold-manual</a>

<span class="h">==============================================================================</span>
<span id="28.3" class="t">28.3</span>  Working with <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a>

When some <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> are closed, <a href="https://vimhelp.org/intro.txt.html#movement" class="d">movement</a> commands like "<a href="https://vimhelp.org/motion.txt.html#j" class="d">j</a>" and "<a href="https://vimhelp.org/motion.txt.html#k" class="d">k</a>" move over <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a>
fold like <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> was <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> single, empty line.  This allows you to quickly move around
over folded text.

You can yank, delete and <a href="https://vimhelp.org/change.txt.html#put" class="d">put</a> <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> <a href="https://vimhelp.org/motion.txt.html#as" class="d">as</a> if <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> was <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> single line.  This <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> very
useful if you want to reorder <a href="https://vimhelp.org/eval.txt.html#functions" class="d">functions</a> in <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> program.  First make sure that
each fold contains <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> whole function (or <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> bit less) by selecting the right
<a href="https://vimhelp.org/options.txt.html#%27foldmethod%27" class="o">'foldmethod'</a>.  Then delete the function with "<a href="https://vimhelp.org/change.txt.html#dd" class="d">dd</a>"<a href="https://vimhelp.org/motion.txt.html#%2C" class="d">,</a> move the cursor and <a href="https://vimhelp.org/change.txt.html#put" class="d">put</a> <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a>
with "<a href="https://vimhelp.org/change.txt.html#p" class="d">p</a>"<a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>  If some lines of the function are above or below the fold, you can
use <a href="https://vimhelp.org/visual.txt.html#Visual" class="d">Visual</a> selection:
<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> <a href="https://vimhelp.org/change.txt.html#put" class="d">put</a> the cursor on the first line to be moved
<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> hit "<a href="https://vimhelp.org/visual.txt.html#V" class="d">V</a>" to start <a href="https://vimhelp.org/visual.txt.html#Visual" class="d">Visual</a> mode
<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> <a href="https://vimhelp.org/change.txt.html#put" class="d">put</a> the cursor on the last line to be moved
<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> hit "<a href="https://vimhelp.org/change.txt.html#d" class="d">d</a>" to delete the selected lines.
<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a> move the cursor to the new position and "<a href="https://vimhelp.org/change.txt.html#p" class="d">p</a>"ut the lines there.

It <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> sometimes difficult to see or remember where <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> located, thus
where <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/fold.txt.html#zo" class="l">zo</a> command would actually work.  To see the defined folds: 
<span class="e"></span>
<span class="e">        :set foldcolumn=4</span>
<span class="e"></span>
This will show <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> small column on the left of the <a href="https://vimhelp.org/windows.txt.html#window" class="d">window</a> to indicate folds.
<a href="https://vimhelp.org/insert.txt.html#A" class="d">A</a> "<a href="https://vimhelp.org/motion.txt.html#%2B" class="d">+</a>" <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> shown for <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> closed fold.  <a href="https://vimhelp.org/insert.txt.html#A" class="d">A</a> "<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a>" <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> shown <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> the start of each open
fold and "|" <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> following lines of the fold.

You can use the mouse to open <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold by clicking on the "<a href="https://vimhelp.org/motion.txt.html#%2B" class="d">+</a>" in the foldcolumn.
Clicking on the "<a href="https://vimhelp.org/motion.txt.html#-" class="d">-</a>" or <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> "|" below <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> will close an open fold.

To open all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> the cursor line use <a href="https://vimhelp.org/fold.txt.html#zO" class="l">zO</a><a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>
To close all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> the cursor line use <a href="https://vimhelp.org/fold.txt.html#zC" class="l">zC</a><a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>
To delete <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> the cursor line use <a href="https://vimhelp.org/fold.txt.html#zd" class="l">zd</a><a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>
To delete all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> the cursor line use <a href="https://vimhelp.org/fold.txt.html#zD" class="l">zD</a><a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>

When in <a href="https://vimhelp.org/insert.txt.html#Insert" class="d">Insert</a> mode, the fold <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> the cursor line <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> never closed.  That allows
you to see what you type!

Folds are opened automatically when jumping around or moving the cursor left
or right.  For example, the "<a href="https://vimhelp.org/motion.txt.html#0" class="d">0</a>" command opens the fold under the cursor
(if <a href="https://vimhelp.org/options.txt.html#%27foldopen%27" class="o">'foldopen'</a> contains "hor"<a href="https://vimhelp.org/motion.txt.html#%2C" class="d">,</a> which <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> the default).  The <a href="https://vimhelp.org/options.txt.html#%27foldopen%27" class="o">'foldopen'</a> option
can be changed to open <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> for specific commands.  If you want the line
under the cursor always to be open, <a href="https://vimhelp.org/diff.txt.html#do" class="d">do</a> this: 
<span class="e"></span>
<span class="e">        :set foldopen=all</span>
<span class="e"></span>
Warning: You won't be able to move onto <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> closed fold then.  You might want to
use this only temporarily and then set <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> back to the default: 
<span class="e"></span>
<span class="e">        :set foldopen&amp;</span>
<span class="e"></span>
You can make <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> close automatically when you move out of it: 
<span class="e"></span>
<span class="e">        :set foldclose=all</span>
<span class="e"></span>
This will re-apply <a href="https://vimhelp.org/options.txt.html#%27foldlevel%27" class="o">'foldlevel'</a> to all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> that don't contain the cursor.
You have to try <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> out if you like how this feels.  Use <a href="https://vimhelp.org/fold.txt.html#zm" class="l">zm</a> to fold more and
<a href="https://vimhelp.org/fold.txt.html#zr" class="l">zr</a> to fold <a href="https://vimhelp.org/various.txt.html#less" class="d">less</a> (reduce folds).

The <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> local to the window.  This allows you to open two <a href="https://vimhelp.org/windows.txt.html#windows" class="d">windows</a> on
the same buffer, one with <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> and one without folds.  Or one with all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a>
closed and one with all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> open.

<span class="h">==============================================================================</span>
<span id="28.4" class="t">28.4</span>  Saving and restoring <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a>

When you <a href="https://vimhelp.org/editing.txt.html#abandon" class="d">abandon</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> file (starting to edit another one), the state of the <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a>
<a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> lost.  If you come back to the same file later, all manually opened and
closed <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> are back to their default.  When <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> have been created
manually, all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> are gone!  To save the <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> use the <a href="https://vimhelp.org/starting.txt.html#%3Amkview" class="l">:mkview</a> command: 
<span class="e"></span>
<span class="e">        :mkview</span>
<span class="e"></span>
This will store the settings and other things that influence the <a href="https://vimhelp.org/starting.txt.html#view" class="d">view</a> on the
file.  You can change what <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> stored with the <a href="https://vimhelp.org/options.txt.html#%27viewoptions%27" class="o">'viewoptions'</a> option.
When you come back to the same file later, you can load the <a href="https://vimhelp.org/starting.txt.html#view" class="d">view</a> again: 
<span class="e"></span>
<span class="e">        :loadview</span>
<span class="e"></span>
You can store up to ten views on one file.  For example, to save the current
setup <a href="https://vimhelp.org/motion.txt.html#as" class="d">as</a> the third <a href="https://vimhelp.org/starting.txt.html#view" class="d">view</a> and load the second view: 
<span class="e"></span>
<span class="e">        :mkview 3</span>
<span class="e">        :loadview 2</span>
<span class="e"></span>
<span class="n">Note</span> that when you <a href="https://vimhelp.org/insert.txt.html#insert" class="d">insert</a> or delete lines the views might become invalid.
Also check out the <a href="https://vimhelp.org/options.txt.html#%27viewdir%27" class="o">'viewdir'</a> option, which specifies where the views are
stored.  You might want to delete old views now and then.

<span class="h">==============================================================================</span>
<span id="28.5" class="t">28.5</span>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> by indent

Defining <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> with <a href="https://vimhelp.org/fold.txt.html#zf" class="l">zf</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> lot of work.  If your text <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> structured by
giving lower level items <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> larger indent, you can use the indent <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a>
method.  This will create <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> for every sequence of lines with the same
indent.  Lines with <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> larger indent will become nested folds.  This works well
with many programming languages.

Try this by setting the <a href="https://vimhelp.org/options.txt.html#%27foldmethod%27" class="o">'foldmethod'</a> option: 
<span class="e"></span>
<span class="e">        :set foldmethod=indent</span>
<span class="e"></span>
Then you can use the <a href="https://vimhelp.org/fold.txt.html#zm" class="l">zm</a> and <a href="https://vimhelp.org/fold.txt.html#zr" class="l">zr</a> commands to fold more and reduce folding.
It's <a href="https://vimhelp.org/starting.txt.html#easy" class="d">easy</a> to see on this example text:

This line <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> not indented
        This line <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> indented once
                This line <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> indented twice
                This line <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> indented twice
        This line <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> indented once
This line <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> not indented
        This line <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> indented once
        This line <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> indented once

<span class="n">Note</span> that the relation between the amount of indent and the fold depth depends
on the <a href="https://vimhelp.org/options.txt.html#%27shiftwidth%27" class="o">'shiftwidth'</a> option.  Each <a href="https://vimhelp.org/options.txt.html#%27shiftwidth%27" class="o">'shiftwidth'</a> worth of indent adds one to the
depth of the fold.  This <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> called <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold level.

When you use the <a href="https://vimhelp.org/fold.txt.html#zr" class="l">zr</a> and <a href="https://vimhelp.org/fold.txt.html#zm" class="l">zm</a> commands you actually increase or decrease the
<a href="https://vimhelp.org/options.txt.html#%27foldlevel%27" class="o">'foldlevel'</a> option.  You could also set <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> directly: 
<span class="e"></span>
<span class="e">        :set foldlevel=3</span>
<span class="e"></span>
This means that all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> with three times <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/options.txt.html#%27shiftwidth%27" class="o">'shiftwidth'</a> indent or more will
be closed.  The lower the foldlevel, the more <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> will be closed.  When
<a href="https://vimhelp.org/options.txt.html#%27foldlevel%27" class="o">'foldlevel'</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> zero, all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> are closed.  <a href="https://vimhelp.org/fold.txt.html#zM" class="l">zM</a> does set <a href="https://vimhelp.org/options.txt.html#%27foldlevel%27" class="o">'foldlevel'</a> to zero.
The opposite command <a href="https://vimhelp.org/fold.txt.html#zR" class="l">zR</a> sets <a href="https://vimhelp.org/options.txt.html#%27foldlevel%27" class="o">'foldlevel'</a> to the deepest fold level that <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a>
present in the file.

Thus there are two ways to open and close the folds:
(A) By setting the fold level.
    This gives <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> very quick way of "zooming out" to <a href="https://vimhelp.org/starting.txt.html#view" class="d">view</a> the structure of the
    text, move the cursor, and "zoom in" on the text again.

(B) By using <a href="https://vimhelp.org/fold.txt.html#zo" class="l">zo</a> and <a href="https://vimhelp.org/fold.txt.html#zc" class="l">zc</a> commands to open or close specific folds.
    This allows opening only those <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> that you want to be open, while other
    <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> remain closed.

This can be combined: You can first close most <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> by using <a href="https://vimhelp.org/fold.txt.html#zm" class="l">zm</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> few times
and then open <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> specific fold with <a href="https://vimhelp.org/fold.txt.html#zo" class="l">zo</a><a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>  Or open all <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> with <a href="https://vimhelp.org/fold.txt.html#zR" class="l">zR</a> and
then close specific <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> with <a href="https://vimhelp.org/fold.txt.html#zc" class="l">zc</a><a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>

But you cannot manually define <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> when <a href="https://vimhelp.org/options.txt.html#%27foldmethod%27" class="o">'foldmethod'</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> "indent"<a href="https://vimhelp.org/motion.txt.html#%2C" class="d">,</a> <a href="https://vimhelp.org/motion.txt.html#as" class="d">as</a> that
would conflict with the relation between the indent and the fold level.

More about <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> by indent in the <a href="https://vimhelp.org/intro.txt.html#reference" class="d">reference</a> manual: <a href="https://vimhelp.org/fold.txt.html#fold-indent" class="l">fold-indent</a>

<span class="h">==============================================================================</span>
<span id="28.6" class="t">28.6</span>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> with markers

Markers in the text are used to specify the start and <a href="https://vimhelp.org/intro.txt.html#end" class="d">end</a> of <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold region.
This gives precise <a href="https://vimhelp.org/intro.txt.html#control" class="d">control</a> over which lines are included in <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold.  The
disadvantage <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> that the text needs to be modified.

Try it: 
<span class="e"></span>
<span class="e">        :set foldmethod=marker</span>
<span class="e"></span>
Example text, <a href="https://vimhelp.org/motion.txt.html#as" class="d">as</a> <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> could appear in <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/change.txt.html#C" class="d">C</a> program:

        <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>* foobar () {{{ *<a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>
        int foobar()
        <a href="https://vimhelp.org/motion.txt.html#%7B" class="d">{</a>
                <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>* return <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> value {{{ *<a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>
                return 42;
                <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>* }}} *<a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>
        <a href="https://vimhelp.org/motion.txt.html#%7D" class="d">}</a>
        <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>* }}} *<a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>

Notice that the folded line will display the text before the marker.  This <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a>
very useful to tell what the fold contains.

It's quite annoying when the markers don't pair up correctly after moving some
lines around.  This can be avoided by using numbered markers.  Example:

        <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>* global <a href="https://vimhelp.org/eval.txt.html#variables" class="d">variables</a> {{{1 *<a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>
        int varA, varB;

        <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>* <a href="https://vimhelp.org/eval.txt.html#functions" class="d">functions</a> {{{1 *<a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>
        <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>* funcA() {{{2 *<a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>
        void funcA() <a href="https://vimhelp.org/intro.txt.html#%7B%7D" class="d">{}</a>

        <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>* funcB() {{{2 *<a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>
        void funcB() <a href="https://vimhelp.org/intro.txt.html#%7B%7D" class="d">{}</a>
        <a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>* }}}1 *<a href="https://vimhelp.org/pattern.txt.html#%2F" class="d">/</a>

At every numbered marker <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> the specified level begins.  This will make
any fold <a href="https://vimhelp.org/motion.txt.html#at" class="d">at</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> higher level stop here.  You can just use numbered start markers
to define all folds.  Only when you want to explicitly stop <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold before
another starts you need to add an <a href="https://vimhelp.org/intro.txt.html#end" class="d">end</a> marker.

More about <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> with markers in the <a href="https://vimhelp.org/intro.txt.html#reference" class="d">reference</a> manual: <a href="https://vimhelp.org/fold.txt.html#fold-marker" class="l">fold-marker</a>

<span class="h">==============================================================================</span>
<span id="28.7" class="t">28.7</span>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> by <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a>

For each language Vim uses <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> different <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a> file.  This defines the colors
for <a href="https://vimhelp.org/various.txt.html#various" class="d">various</a> items in the file.  If you are reading this in Vim, in <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/terminal.txt.html#terminal" class="d">terminal</a>
that supports colors, the colors you see are made with the "<a href="https://vimhelp.org/helphelp.txt.html#help" class="d">help</a>" <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a> file.
   In the <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a> files <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> possible to add <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a> items that have the "fold"
argument.  These define <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold region.  This requires <a href="https://vimhelp.org/editing.txt.html#writing" class="d">writing</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a> file
and adding these items in it.  That's not so <a href="https://vimhelp.org/starting.txt.html#easy" class="d">easy</a> to do.  But once it's done,
all <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> happens automatically.
   Here we'll assume you are using an existing <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a> file.  Then there <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a>
nothing more to explain.  You can open and close <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> <a href="https://vimhelp.org/motion.txt.html#as" class="d">as</a> explained above.
The <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> will be created and deleted automatically when you edit the file.

More about <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> by <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a> in the <a href="https://vimhelp.org/intro.txt.html#reference" class="d">reference</a> manual: <a href="https://vimhelp.org/fold.txt.html#fold-syntax" class="l">fold-syntax</a>

<span class="h">==============================================================================</span>
<span id="28.8" class="t">28.8</span>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> by <a href="https://vimhelp.org/eval.txt.html#expression" class="d">expression</a>

This <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> similar to <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> by indent, but instead of using the indent of <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a>
line <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> user function <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> called to compute the fold level of <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> line.  You can
use this for text where something in the text indicates which lines belong
together.  An example <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> an e-mail message where the quoted text <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> indicated
by <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> "<a href="https://vimhelp.org/change.txt.html#%3E" class="d">&gt;</a>" before the line.  To fold these <a href="https://vimhelp.org/quotes.txt.html#quotes" class="d">quotes</a> use this: 
<span class="e"></span>
<span class="e">        :set foldmethod=expr</span>
<span class="e">        :set foldexpr=strlen(substitute(substitute(getline(v:lnum),'\\s','',\"g\"),'[^&gt;].*','',''))</span>
<span class="e"></span>
You can try <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> out on this text:

<a href="https://vimhelp.org/change.txt.html#%3E" class="d">&gt;</a> quoted text he wrote
<a href="https://vimhelp.org/change.txt.html#%3E" class="d">&gt;</a> quoted text he wrote
<a href="https://vimhelp.org/change.txt.html#%3E" class="d">&gt;</a> <a href="https://vimhelp.org/change.txt.html#%3E" class="d">&gt;</a> double quoted text <a href="https://vimhelp.org/insert.txt.html#I" class="d">I</a> wrote
<a href="https://vimhelp.org/change.txt.html#%3E" class="d">&gt;</a> <a href="https://vimhelp.org/change.txt.html#%3E" class="d">&gt;</a> double quoted text <a href="https://vimhelp.org/insert.txt.html#I" class="d">I</a> wrote

Explanation for the <a href="https://vimhelp.org/options.txt.html#%27foldexpr%27" class="o">'foldexpr'</a> used in the example (inside out):
   getline(v:lnum)                      gets the current line
   substitute(...,'\\s','','g')         removes all white <a href="https://vimhelp.org/intro.txt.html#space" class="d">space</a> from the line
   substitute(...,'[^&gt;].*','','')       removes everything after leading '&gt;'s
   strlen(...)                          counts the length of the string, which
                                        <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> the number of '&gt;'s found

<span class="n">Note</span> that <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/intro.txt.html#backslash" class="d">backslash</a> <a href="https://vimhelp.org/vim_faq.txt.html#must" class="d">must</a> be inserted before every space, double <a href="https://vimhelp.org/change.txt.html#quote" class="d">quote</a> and
<a href="https://vimhelp.org/intro.txt.html#backslash" class="d">backslash</a> for the "<a href="https://vimhelp.org/options.txt.html#%3Aset" class="d">:set</a>" command.  If this confuses you, <a href="https://vimhelp.org/diff.txt.html#do" class="d">do</a> 
<span class="e"></span>
<span class="e">        :set foldexpr</span>
<span class="e"></span>
to check the actual resulting value.  To correct <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> complicated expression, use
the command-line completion: 
<span class="e"></span>
<span class="e">        :set foldexpr=&lt;Tab&gt;</span>
<span class="e"></span>
Where <a href="https://vimhelp.org/motion.txt.html#%3CTab%3E" class="s">&lt;Tab&gt;</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> real Tab.  Vim will fill in the previous value, which you can
then edit.

When the <a href="https://vimhelp.org/eval.txt.html#expression" class="d">expression</a> gets more complicated you should <a href="https://vimhelp.org/change.txt.html#put" class="d">put</a> <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> in <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> function and
set <a href="https://vimhelp.org/options.txt.html#%27foldexpr%27" class="o">'foldexpr'</a> to call that function.

More about <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> by <a href="https://vimhelp.org/eval.txt.html#expression" class="d">expression</a> in the <a href="https://vimhelp.org/intro.txt.html#reference" class="d">reference</a> manual: <a href="https://vimhelp.org/fold.txt.html#fold-expr" class="l">fold-expr</a>

<span class="h">==============================================================================</span>
<span id="28.9" class="t">28.9</span>  <a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> unchanged lines

This <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> useful when you set the <a href="https://vimhelp.org/options.txt.html#%27diff%27" class="o">'diff'</a> option in the same window.  The
<a href="https://vimhelp.org/diff.txt.html#vimdiff" class="l">vimdiff</a> command does this for you.  Example: 
<span class="e"></span>
<span class="e">        :setlocal diff foldmethod=diff scrollbind nowrap foldlevel=1</span>
<span class="e"></span>
Do this in every <a href="https://vimhelp.org/windows.txt.html#window" class="d">window</a> that shows <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> different version of the same file.  You
will clearly see the differences between the files, while the text that didn't
change <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> folded.

For more details see <a href="https://vimhelp.org/fold.txt.html#fold-diff" class="l">fold-diff</a><a href="https://vimhelp.org/repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
<span id="28.10" class="t">28.10</span> Which fold <a href="https://vimhelp.org/eval.txt.html#method" class="d">method</a> to use?

All these possibilities make you wonder which <a href="https://vimhelp.org/eval.txt.html#method" class="d">method</a> you should choose.
Unfortunately, there <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> no golden rule.  Here are some hints.

If there <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> <a href="https://vimhelp.org/syntax.txt.html#syntax" class="d">syntax</a> file with <a href="https://vimhelp.org/fold.txt.html#folding" class="d">folding</a> for the language you are editing, that
<a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> probably the best choice.  If there isn't one, you might try to write it.
This requires <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> good knowledge of search patterns.  It's not easy, but when
it's working you will not have to define <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> manually.

Typing commands to manually fold regions can be used for unstructured text.
Then use the <a href="https://vimhelp.org/starting.txt.html#%3Amkview" class="l">:mkview</a> command to save and restore your folds.

The marker <a href="https://vimhelp.org/eval.txt.html#method" class="d">method</a> requires you to change the file.  If you are sharing the
files with other people or you have to meet company standards, you might not
be allowed to add them.
   The main advantage of markers <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> that you can <a href="https://vimhelp.org/change.txt.html#put" class="d">put</a> them exactly where you
want them.  That avoids that <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> few lines are missed when you cut and paste
folds.  And you can add <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> comment about what <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> contained in the fold.

<a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> by indent <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a> something that works in many files, but not always very
well.  Use <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> when you can't use one of the other methods.  However, <a href="https://vimhelp.org/motion.txt.html#it" class="d">it</a> <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a>
very useful for outlining.  Then you specifically use one <a href="https://vimhelp.org/options.txt.html#%27shiftwidth%27" class="o">'shiftwidth'</a> for
each nesting level.

<a href="https://vimhelp.org/fold.txt.html#Folding" class="d">Folding</a> with expressions can make <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> in almost any structured text.  It <a href="https://vimhelp.org/motion.txt.html#is" class="d">is</a>
quite simple to specify, especially if the start and <a href="https://vimhelp.org/intro.txt.html#end" class="d">end</a> of <a href="https://vimhelp.org/insert.txt.html#a" class="d">a</a> fold can easily
be recognized.
   If you use the "<a href="https://vimhelp.org/eval.txt.html#expr" class="d">expr</a>" <a href="https://vimhelp.org/eval.txt.html#method" class="d">method</a> to define folds, but they are not exactly how
you want them, you could switch to the "manual" method.  This will not remove
the defined folds.  Then you can delete or add <a href="https://vimhelp.org/fold.txt.html#folds" class="d">folds</a> manually.

<span class="h">==============================================================================</span>

Next chapter: <a href="https://vimhelp.org/usr_29.txt.html#usr_29.txt" class="l">usr_29.txt</a>  Moving through programs

Copyright: see <a href="https://vimhelp.org/usr_01.txt.html#manual-copyright" class="l">manual-copyright</a>  vim:tw=78:ts=8:noet:ft=help:norl:


</pre>
</div>
<div id="vh-sidebar" style="visibility: visible; position: sticky; left: 105.667px;"><ul><li><a href="#">Top</a></li><li><a href="#28.1">What is folding?</a></li><li><a href="#28.2">Manual folding</a></li><li><a href="#28.3">Working with folds</a></li><li><a href="#28.4">Saving and restoring folds</a></li><li><a href="#28.5">Folding by indent</a></li><li><a href="#28.6">Folding with markers</a></li><li><a href="#28.7">Folding by syntax</a></li><li><a href="#28.8">Folding by expression</a></li><li><a href="#28.9">Folding unchanged lines</a></li><li><a href="#28.10">Which fold method to use?</a></li></ul></div>
</main>
<p>
Quick links:
<a href="https://vimhelp.org/">help overview</a> 路
<a href="https://vimhelp.org/quickref.txt.html">quick reference</a> 路
<a href="https://vimhelp.org/usr_toc.txt.html">user manual toc</a> 路
<a href="https://vimhelp.org/#reference_toc">reference manual toc</a>
路 <a href="https://vimhelp.org/vim_faq.txt.html">faq</a></p>
<footer>This site is maintained by Carlo Teubner (<i>(my first name) at cteubner dot net</i>).</footer>


<div id="sourcegraph-app-background" data-platform="firefox-extension" data-version="22.11.24.1820" style="display: none;"></div><div id="simple-translate" class="simple-translate-light-theme"><div><div style="background-image: url(&quot;moz-extension://60a33c9f-71a8-4283-9abc-f90639c1fcd0/icons/512.png&quot;); height: 22px; width: 22px; top: 617px; left: 1110px;" class="simple-translate-button isShow"></div><div class="simple-translate-panel " style="width: 300px; height: 200px; top: 0px; left: 0px; font-size: 17px;"><div class="simple-translate-result-wrapper" style="overflow: hidden;"><div class="simple-translate-move" draggable="true"></div><div class="simple-translate-result-contents"><p class="simple-translate-result" dir="auto"></p><p class="simple-translate-candidate" dir="auto"></p></div></div></div></div></div></body></html>